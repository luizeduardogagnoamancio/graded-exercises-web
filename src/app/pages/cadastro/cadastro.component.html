<p-toast></p-toast> <div class="cadastro-container">
  <p-card styleClass="form-card">
    <ng-template pTemplate="title">
      <div class="card-title">Create your account</div>
    </ng-template>

    <form [formGroup]="cadastroForm" (ngSubmit)="onSubmit()">
      <div class="p-fluid">
        <div class="field">
          <label for="email">E-mail Address</label>
          <input id="email" type="email" pInputText formControlName="email" placeholder="email@example.com"
                 [ngClass]="{'ng-invalid ng-dirty': f['email'].touched && f['email'].errors}" />
          <small *ngIf="f['email'].touched && f['email'].errors?.['required']" class="p-error">
            E-mail is required.
          </small>
          <small *ngIf="f['email'].touched && f['email'].errors?.['email']" class="p-error">
            Please enter a valid e-mail.
          </small>
        </div>

        <div class="field">
          <label for="password">Password</label>
          <p-password id="password" formControlName="password" [toggleMask]="true" [feedback]="false"
                      placeholder="********"
                      [ngClass]="{'ng-invalid ng-dirty': f['password'].touched && f['password'].errors}"></p-password>
          <small *ngIf="f['password'].touched && f['password'].errors?.['required']" class="p-error">
            Password is required.
          </small>
          <small *ngIf="f['password'].touched && f['password'].errors?.['minlength']" class="p-error">
            Password must be at least 6 characters.
          </small>
        </div>

        <div class="field">
          <label for="confirmPassword">Confirm your password</label>
          <p-password id="confirmPassword" formControlName="confirmPassword" [toggleMask]="true" [feedback]="false"
                      placeholder="********"
                      [ngClass]="{'ng-invalid ng-dirty': (f['confirmPassword'].touched && f['confirmPassword'].errors) || (cadastroForm.errors?.['passwordMismatch'] && f['confirmPassword'].touched)}"></p-password>
          <small *ngIf="f['confirmPassword'].touched && f['confirmPassword'].errors?.['required']" class="p-error">
            Confirm password is required.
          </small>
          <small *ngIf="cadastroForm.errors?.['passwordMismatch'] && (f['password'].touched || f['confirmPassword'].touched)" class="p-error">
            Passwords do not match.
          </small>
        </div>

        <div class="field-checkbox">
          <p-checkbox id="acceptTerms" formControlName="acceptTerms" binary="true"></p-checkbox>
          <label for="acceptTerms" class="ml-2">Accept the Terms of Service</label>
          <div *ngIf="f['acceptTerms'].touched && f['acceptTerms'].errors?.['requiredTrue']" class="p-error mt-1">
            You must accept the terms of service.
          </div>
        </div>

        <div class="field">
          <button pButton label="Register" type="submit" styleClass="w-full" [loading]="loading"></button>
        </div>
      </div>
    </form>
  </p-card>
</div>
